<!DOCTYPE html>
<html>
<head>

  <link rel="stylesheet" href="new_stylesheet.css">
  <!-- Google Icons -->
  
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
      rel="stylesheet">

  <script type="module" src="script.js"></script>
  <script type="module" src="puzzles.js"></script>
</head>
<body>
  

  <div id='containall' class="vertical-flex-cont">
    <div class="modal-container">

      <div id="login_modal" class="popup-modal">
        <div class="header">
          <button
              type="button", class='button square minimal close-fs-modal-button invisible'><span class="material-icons-round">
                close
                </span></button>
          Login or Create a Profile
          <button
              type="button", class='button square minimal close-fs-modal-button' for="login_modal"><span class="material-icons-round" >
                close
                </span></button>
        </div>
        <span>Without a profile, you will only be able to play the daily easy puzzle.</span>
        <form id="login_form" class="vertical-flex-cont">
            <input type="text" id="uname" name="uname" maxlength="20" placeholder="Username" class="textinput"/>
              <input type="password" id="pword" name="pword" maxlength="20" placeholder="Password" class="textinput"/>

            <div class="flex-box">
              <input type="text" id="email" name="email" maxlength="50" placeholder="Email Address" class="textinput">
              <div class="help-tip">
                <p class="tooltipText">Your passwords are hashed in a database and can only be reset by email.</p>
              </div>
            </div>
          <div class="horizontal-flex-cont">
            <input type="submit" name="login" value="Login" class="input_button">
            <input type="submit" name="create" value="Create Profile" class="input_button">
          </div>
        
        <div>Usernames need to be <b>free of obscene language</b>. Using a vulgar username may result in your profile being deleted.</div>
        <div class="horizontal-flex-cont one-child"><input type="submit" name="reset" class="input_button" id="pass_reset_button" value="Reset Password"></div>
        </form>
        <div id="login_loader" class="dot-spin"></div>
      </div>
  
      <div id="send_reset_email_modal" class="popup-modal higher">
        <div class="header">
          <button
              type="button", class='button square minimal close-fs-modal-button invisible'><span class="material-icons-round">
                close
                </span></button>
          Password Reset
          <button
          type="button", class='button square minimal close-fs-modal-button' for="send_reset_email_modal"><span class="material-icons-round" >
            close
            </span></button>
        </div>
        <form id="reset_token_form" class="vertical-flex-cont">
            <input type="text" id="reset_email_send" name="email" maxlength="50" placeholder="Email Address" class="textinput">
            <div><br><i>Enter your email address. If an account exists, we will send a password reset token to use in the next step.</i></div>
          <div class="horizontal-flex-cont">
            <input type="submit" name="send_token" value="Request Reset Token" class="input_button">
            <input type="submit" name="input_token" value="Enter My Token" class="input_button">
          </div>
        </form>
        <div id="reset_loader_1" class="dot-spin"></div>
      </div>
  
      <div id="password_reset_modal" class="popup-modal higher">
        <div class="header">
          <button
              type="button", class='button square minimal close-fs-modal-button invisible'><span class="material-icons-round">
                close
                </span></button>
          Password Reset
          <button
          type="button", class='button square minimal close-fs-modal-button' for="password_reset_modal"><span class="material-icons-round" >
            close
            </span></button>
        </div>
        <form id="password_reset_form" class="vertical-flex-cont">
            <input type="text" id="reset_email" name="email" maxlength="50" placeholder="Email Address" class="textinput">
            <input type="password" id="new_pword" name="pword" maxlength="20" placeholder="New Password" class="textinput"/>
            <input type="text" id="reset_token" name="reset_token" maxlength="50" placeholder="Reset Token" class="textinput">
            <div><i>Enter the password reset token sent to your email above, along with your email and new password</i></div>
            <div class="horizontal-flex-cont one-child"><input type="submit" name="reset" value="Set New Password" class="input_button"></div>
        </form>
        <div id="reset_loader_2" class="dot-spin"></div>
      </div>
  
      <div id="puzzle_reward" class="popup-modal">
        <div class="header">
          <button type="button", class='square button minimal invisible close-fs-modal-button'>&times;</button> <!-- TODO: Rename to close-modal-button -->
          <span id="reward_title">&#127881; Congratulations &#127881;</span>
          <button
              type="button", class='button square minimal close-fs-modal-button' for="puzzle_reward"><span class="material-icons-round" >
                close
                </span></button>
        </div> <!-- <!> Congratulations <!>, etc. with emojis -->
  
        <span id="reward_base_points"></span> <!-- 45 points! -->
        <div id="reward_bonuses" class="horizontal-flex-cont">
          <div class="vertical_flex-cont bonus_col"> <!-- Early Bonus -->
            <span class="bonus_w_description horizontal-flex-cont">
              <div class="help-tip invisible"></div>
              <div><img class="bonus_icon bonus square" src="flag_one.svg"/></div>
              <div class="help-tip">
                <p class="tooltipText">Earned by being one of the first to complete the puzzle. First earns +200%. Next four earn +50%.</p>
              </div>
            </span>
              <div id="early_bonus"></div>
              <div id="early_points"> --</div>
          </div> 
          <div id="centre_bonus" class="vertical_flex-cont bonus_col">
            <span class="bonus_w_description horizontal-flex-cont">
              <div class="help-tip invisible"></div>
              <div><img class="bonus_icon bonus square" src="fast_bonus.svg"/></div>
              <div class="help-tip">
                <p class="tooltipText">Earned by being one of the fastest to complete the puzzle. Fastest earns +75%. Next 3 earn +25%.</p>
              </div>
            </span>
            <div id="fast_bonus"></div>
            <div id="fast_points"> --</div>
          </div> <!-- Fast Bonus -->
            
          <div class="vertical_flex-cont bonus_col">
            <span class="bonus_w_description horizontal-flex-cont">
              <div class="help-tip invisible"></div>
              <div><img class="bonus_icon bonus square" src="strategy.svg"/></div>
              <div class="help-tip">
                <p class="tooltipText">Earned by completing the puzzle with fewer guesses than others. Fewest guesses earns +75%. Next 2 earn +25%.</p>
              </div>
            </span>
            <div id="guess_bonus"></div>
            <div id="guess_points"> --</div>
          </div> <!-- Strategy Bonus -->
  
        </div> 
        <span id="reward_total_points"></span>
        <table>
          <caption>Finisher Leaderboard</caption>
          <thead>
            <tr>
              <th scope="col">Rank</th>
              <th scope="col">Username</th>
              <th scope="col">Points</th>
              <th scope="col"><img class="bonus_icon small" src="flag_one.svg"/></th>
              <th scope="col"><img class="bonus_icon small" src="fast_bonus.svg"/></th>
              <th scope="col"><img class="bonus_icon small" src="strategy.svg"/></th>
            </tr>
          </thead>
          <tbody id="daily_leaderboard_tbody">
            <!-- EXAMPLE ROWS FOR TESTING CSS
            <tr>
              <th scope="row">1st</th>
              <td>BEEEEEEEEESSAHAHAHA</td>
              <td>420</td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
              <td></td>
              <td><img class="bonus_icon small" src="gold-medal.svg"/></td>
            </tr>
            <tr>
              <th scope="row">2nd</th>
              <td>CuteJade</td>
              <td>69</td>
              <td></td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
            </tr>
          -->
          </tbody>
        </table>
        <div id="reward_leaderboard_loader" class="dot-flashing"></div>
      </div>

    </div>

    <div id="overlay" class="overlay"></div> <!-- Starts opened -->
    <div id="versionUpdateModal" class="fullscreen-modal">
      <div class="header">Version Updates
        <button
          type="button" class='button square minimal close-fs-modal-button' for="versionUpdateModal"><span  class="material-icons-round">
            close
            </span></button>
      </div>
      <p><u>V1.0.9 - Sep 25 2023</u></p>

      <ul>
        <li><p>Added: You can now play the easy puzzle without logging in (to encourage new players to try it out).</p></li>
        <li><p>Added: After finishing the easy puzzle while not being logged in - logging in or creating an account will add your rewards to your profile</p></li>
        <li><p>Changed: Hard puzzles with now be worth more.</p></li>
        <li><p>Fixed: Problems with puzzle refusing to accept answer place in lower rows</p></li>
        <li><p>Fixed: Delete key no longer shifts over to the next letter</p></li>
      </ul>
      <br>
      <p><u>V1.0.8 - Sep 23 2023</u></p>

      <ul>
        <li><p>Removed: No user_id cookies yet. Apple won't save cookie. This will wait until we have a custom URL</p></li>
        <li><p>Added: Passwords are store in the database as a salted hash. Basically it's much safer</p></li>
        <li><p>Added: Password reset via email</p></li>
      </ul>

      <br>
      <p><u>V1.0.7 - Sep 21 2023</u></p>

      <ul>
        <li><p>Added: Security! Your user_id is now sent through a cookie</p></li>
      </ul>

      <br>
      <p><u>V1.0.6 - Sep 12 2023</u></p>

      <ul>
        <li><p>Added: Leaderboard !!!</p></li>
        <li><p>Added: Streaks</p></li>
      </ul>
      
    </div>

    <div id="howToModal", class='fullscreen-modal'>
      <div id="modal-header" class='header'>
        <span>HOW TO PLAY</span>
        <button
          type="button" class='button square minimal close-fs-modal-button' for="howToModal"><span  class="material-icons-round">
            close
            </span></button>
      </div> <!-- modal header close -->
      <div>
        <hr>
        <hr>
        <span>
          Your goal is to solve the puzzle in as few guesses as possible. You can make guesses one row at a time, or try to solve multiple rows with one guess.
          <hr>
          Between any word and the next one, <b>1 letter</b> will always be swapped out for a different one.
        </span>
        <div class='rowHolder minimal ex'>
          <div class='wordRow horizontal-flex-cont ex'> <div class='letterBox letterRemoved ex'>T</div> <div class='letterBox ex below'>O</div> <div class='letterBox ex below'>U</div>
          <div class='letterBox ex below'>C</div> <div class='letterBox ex below'>H</div> </div>

          <div class='wordRow horizontal-flex-cont ex'> <div class='letterBox letterAdded ex'>C</div> <div class='letterBox ex above'>O</div> <div class='letterBox ex above'>U</div>
          <div class='letterBox ex above'>C</div> <div class='letterBox ex above'>H</div> </div>
        </div>
        <span>
          Blue markings inside the boxes show which letters have repeated between one word and the next.
        </span>
        <hr>
        <span>
          Along with swapping, the order of the letters might be <i>scrambled.</i>
        </span>
        <div class='rowHolder minimal ex'>
          <div class='wordRow horizontal-flex-cont ex'> <div class='letterBox ex below'>S</div> <div class='letterBox letterRemoved ex'>P</div> <div class='letterBox ex below'>O</div>
          <div class='letterBox ex below'>R</div> <div class='letterBox ex below'>T</div> </div>

          <div class='wordRow horizontal-flex-cont ex'> <div class='letterBox ex above'>S</div> <div class='letterBox ex above'>T</div> <div class='letterBox ex above'>O</div>
          <div class='letterBox ex above'>R</div> <div class='letterBox letterAdded ex'>M</div> </div>
        </div> 
        <hr>
        <span>
          When you make a guess, correct words will be coloured <span style="color: var(--correct-color);">green</span>, and incorrect words will be coloured <span style="color: var(--wrong-color)">orange</span>. 
        </span>
        <div class='rowHolder minimal ex'>
          <div class='wordRow horizontal-flex-cont correct ex'> <div class='letterBox ex below'>C</div> <div class='letterBox letterRemoved ex'>H</div> <div class='letterBox ex below'>E</div>
          <div class='letterBox ex below'>S</div> <div class='letterBox ex below'>T</div> </div>

          <div class='wordRow horizontal-flex-cont correct ex'> <div class='letterBox letterInput ex above below'>S</div> <div class='letterBox ex above'>C</div> <div class='letterBox ex above below'>E</div>
          <div class='letterBox ex below'>N</div> <div class='letterBox letterAdded above ex below'>T</div> </div>

          <div class='wordRow horizontal-flex-cont wrong ex'> <div class='letterBox letterInput ex '>D</div> <div class='letterBox letterInput ex above'>E</div> <div class='letterBox letterInput ex above'>N</div>
          <div class='letterBox ex above'>T</div> <div class='letterBox letterAdded ex above below'>S</div> </div>

          <div class='wordRow horizontal-flex-cont ex'> <div class='letterBox letterInput ex'></div> <div class='letterBox letterInput ex'></div> <div class='letterBox ex'>L</div>
          <div class='letterBox letterInput ex'></div> <div class='letterBox letterAdded ex above'>S</div> </div>
        </div> 
        <br></br>
      </div> <!-- modal body div close -->
    </div> <!-- modal close -->

    <div class='header horizontal-flex-cont'>
      <button id="keyboardbutton" type="button" class='square flex-item'>
        <div><img src="keyboard.svg"/></div>
          </button>
          <button id="pastPuzzlesButton" type="button" class="square flex-item">
            <div><img src="past.svg"/></div>
          </button>
      <div id="scrambler_title">
        <button class="notify-button invisible square"></button>
        <span>SCRAMBLER</span>
        <button id="version_update_button" for="versionUpdateModal" class="notify-button square open-fs-modal-button" 
        type="button"></button>
      </div>
      
      <button id="leaderboardButton" type="button" class='square flex-item open-fs-modal-button'>
        <div><img for="fullLeaderboard" src="leaderboard.svg"/></div>
      </button>
      <button id="modalbutton" for="howToModal" name="openmodalbutton" type="button" 
      class='square flex-item open-fs-modal-button'>
        <div><img for="howToModal" src="question.svg"/></div>
      </button>

    </div> <!-- page header close -->
    <div id="username_holder">
      <span id="username"></span>
      <button id="open_login_button" class="open-fs-modal-button" for="login_modal">Login</button>
    </div>
    

    

    <div id="gameBox" class='gameBox vertical-flex-cont'>
      
      <div id="message_banner"><b>Since you've already completed this puzzle before, any future attempts won't earn you any rewards.</b></div>

      <div id="gameBox_wrapper">

        <div class="vertical-flex-cont">
          <div class="vertical-flex-cont game-stats">
            <div class="horizontal-flex-cont ">
              <div id="guesses">Guesses: <span id="guesses_made">0</span></div>
              <div id="next_game_box">Next Game: <span id="next_game"></span></div>
            </div>
            <div class="horizontal-flex-cont">
              
                <div>Streak: <span class="streak">?</span></div>
                <div id="points_holder">Points: <span id="points">?</span></div>
              
            </div>
          </div>
          <div class="horizontal-flex-cont">
            <div class="left-game-buttons">
              <!-- Invisible buttons to push in game-button equal amount to game squares -->
              <button class="button square minimal reset flex-item invisible"><div><img class="svg" for="0" src="reset.svg"></div></button>
              
              <!-- easy/hard toggle -->
              <div class="switch-field">
                <!-- checked can only apply to one radio per set of names -->
                <input type="radio" id="easy_radio" class="switch_diff_radio" name="switch-one" value="easy" checked="checked" autocomplete="off" /> 
                <label for="easy_radio" class="game-button">Easy</label>
                <input type="radio" id="hard_radio" class="switch_diff_radio" name="switch-one" value="hard" />
                <label for="hard_radio" class="game-button">Hard</label>
              </div>
            </div>
            <div class="right-game-buttons">
              <button id="refresh_guess" class="game-button">Refresh Guess</button>

              <!-- Invisible buttons to push in game-button equal amount to game squares -->
              <button class="button square minimal reset flex-item invisible"><div><img class="svg" for="0" src="reset.svg"></div></button>
            </div>
          </div>
          
        </div>
        <div id="rowHolder" class='rowHolder'></div>
        <div id="puzzle_loader" class="loader"></div>
        <button id="answerBtn" name="answerPuzzleButton" type="button" class='button answerButton'>Guess</button>
        <div id="button_response" class='guessResponse'></div>
        
      </div> <!-- Close gamebox wrapper (needed for margin, so rewardless banner can press against sides)-->
    </div>

    <!-- Full Leaderboard -->
      <div id="fullLeaderboard" class="fullscreen-modal">
        
        <div class="header">
          <button
                type="button", class='button square minimal invisible close-fs-modal-button'><span class="material-icons-round">
                  close
                  </span></button>
          Scrambler Leaderboard
          <button
                type="button", class='button square minimal close-fs-modal-button' for="fullLeaderboard"><span class="material-icons-round" >
                  close
                  </span></button>
        
        </div>
      <div class="vertical-header">
        <div class="horizontal-flex-cont">
          <div class="switch-field leaderboard_toggle">
            <input type="radio" id="dailyLBRadio" class="switch_lb_radio" name="switch-two" value="today" checked/>
            <label for="dailyLBRadio">Today</label>
            <input type="radio" id="weekLBRadio" class="switch_lb_radio" name="switch-two" value="week" />
            <label for="weekLBRadio">This Week</label>
            <input type="radio" id="allLBRadio" class="switch_lb_radio" name="switch-two" value="all" />
            <label for="allLBRadio">All Time</label>
          </div>
        </div>

        <div class="vertical-flex-cont game-stats">
          <div class="horizontal-flex-cont "> <!-- Fields all change values for each tab -->
            <div>Your Rank: <span id="lb_rank">?</span></div> <!-- Left -->
            <div id="next_reset_box">Next Reset: <span id="next_reset"></span></div> <!-- Right-->
          </div>
          <div class="horizontal-flex-cont ">
            
              <div>Streak: <span class="streak">?</span></div>
              <div id="points_holder">Points: <span id="lb_points">?</span></div>
            
          </div>
        </div>


        <div class="centered">
          <div id="today_leaderboard_diff" class="switch-field">
            <input type="radio" id="easyLBRadio" class="leaderboard_diff_radio" name="switch-3" value="easy" checked/>
            <label for="easyLBRadio" class="game-button">Easy</label>
            <input type="radio" id="hardLBRadio" class="leaderboard_diff_radio" name="switch-3" value="hard" />
            <label for="hardLBRadio" class="game-button">Hard</label>
          </div>
          
        </div>
      </div>
      <div style="overflow: auto;">
        <table id="full_leaderboard_table" class="longer">
          <thead id="today_thead">
            <tr>
              <th scope="col">Rank</th>
              <th scope="col">Username</th>
              <th scope="col">Points</th>
              <th scope="col" id="lb_first_icon"><img class="bonus_icon small" src="flag_one.svg"/></th>
              <th scope="col" id="lb_second_icon"><img class="bonus_icon small" src="fast_bonus.svg"/></th>
              <th scope="col" id="lb_third_icon"><img class="bonus_icon small" src="strategy.svg"/></th> <!-- <img  class="bonus_icon small" src="strategy.svg"/> -->
            </tr>
          </thead>
          <thead id="long_thead" class="removed">
            <tr>
              <th scope="col">Rank</th>
              <th scope="col">Username</th>
              <th scope="col">Points</th>
              <th scope="col" id="lb_first_icon"><img class="bonus_icon small" src="gold-medal.svg"/></th>
              <th scope="col" id="lb_second_icon"><img class="bonus_icon small" src="silver-medal.svg"/></th>
              <th scope="col" id="lb_third_icon">Puzzles</th> <!-- <img  class="bonus_icon small" src="strategy.svg"/> -->
            </tr>
          </thead>
          <tbody id="easy_leaderboard_tbody" class="full-leaderboard-tbody">
            <!-- EXAMPLE ROWS FOR TESTING CSS
            <tr>
              <th scope="row">1</th>
              <td>BEEEEEEEEESSAHAHAHA</td>
              <td>420</td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
              <td></td>
              <td><img class="bonus_icon small" src="gold-medal.svg"/></td>
            </tr>
            <tr>
              <th scope="row">2</th>
              <td>CuteJade</td>
              <td>69</td>
              <td></td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
              <td><img class="bonus_icon small" src="silver-medal.svg"/></td>
            </tr>
          -->
          </tbody>
          <tbody id="hard_leaderboard_tbody" class="full-leaderboard-tbody invisible"></tbody>
          <tbody id="week_leaderboard_tbody" class="full-leaderboard-tbody invisible"></tbody>
          <tbody id="all_leaderboard_tbody" class="full-leaderboard-tbody invisible"></tbody>
        </table>
      </div>

    </div>
  </div>

  

  <div id="keyboard-cont">
      <div class="first-row">
          <button class="keyboard-button flex-item">q</button>
          <button class="keyboard-button flex-item">w</button>
          <button class="keyboard-button flex-item">e</button>
          <button class="keyboard-button flex-item">r</button>
          <button class="keyboard-button flex-item">t</button>
          <button class="keyboard-button flex-item">y</button>
          <button class="keyboard-button flex-item">u</button>
          <button class="keyboard-button flex-item">i</button>
          <button class="keyboard-button flex-item">o</button>
          <button class="keyboard-button flex-item">p</button>
      </div>
      <div class="second-row">
          <button class="keyboard-button flex-item">a</button>
          <button class="keyboard-button flex-item">s</button>
          <button class="keyboard-button flex-item">d</button>
          <button class="keyboard-button flex-item">f</button>
          <button class="keyboard-button flex-item">g</button>
          <button class="keyboard-button flex-item">h</button>
          <button class="keyboard-button flex-item">j</button>
          <button class="keyboard-button flex-item">k</button>
          <button class="keyboard-button flex-item">l</button>
      </div>
      <div class="third-row">
          <button class="keyboard-button square flex-item" value="enter"><div><img src="enter.svg"/></div></button>
          <button class="keyboard-button flex-item">z</button>
          <button class="keyboard-button flex-item">x</button>
          <button class="keyboard-button flex-item">c</button>
          <button class="keyboard-button flex-item">v</button>
          <button class="keyboard-button flex-item">b</button>
          <button class="keyboard-button flex-item">n</button>
          <button class="keyboard-button flex-item">m</button>
          <button class="keyboard-button square flex-item" value="backspace"><div><img src="backspace.svg"/></div></button>
      </div>
  </div>

</body>
</html>
